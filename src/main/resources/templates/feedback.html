<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Feedback</title>
    <link rel="stylesheet" href="/new.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta th:replace="fragments.html :: head-metadata">
</head>
<body>
<section class="app">
    <header>
        <a th:href="@{/}"> < </a>
        <h2>Feedback</h2>
    </header>

    <main>
        <div class="intro">
            <p>We'd love to hear from you!</p>
            <p>All your feedback is processed by our cat.</p>
        </div>

        <form method="post" th:action="|/feedback|" id="form">
            <p>Anonymous review:</p>
            <label>
                <textarea name="description"></textarea>
            </label>
            <p th:if="${received} == true" id="received">Feedback received, thank you!</p>
            <button th:unless="${received} == true" id="formButton" type="submit">SUBMIT</button>
        </form>

        <p>or</p>

        <div class="discordFeedback" onclick="redirectToDiscord()">
            <p>Join our Discord Community</p>
            <svg th:insert="svgFragments::discord_icon"></svg>
        </div>
    </main>
</section>

<script>
    function redirectToDiscord() {
        let discordUrl = 'https://discord.gg/cP9Xa5TcuX';
        window.open(discordUrl, '_blank');
    }

    document.addEventListener("DOMContentLoaded", function() {
        const rootElement = document.documentElement;
        const theme = localStorage.getItem("theme");

        theme && rootElement.classList.add(theme);

        const isDarkMode = rootElement.classList.contains("dark");

        if (!isDarkMode && theme === "dark") {
            rootElement.classList.add("dark");
        }

        if (isDarkMode) {
            localStorage.setItem("theme", "dark");
        } else {
            localStorage.removeItem("theme");
        }
    });
</script>
</body>
</html>
